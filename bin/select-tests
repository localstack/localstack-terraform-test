#!/usr/bin/env python

"""Select tests for a particular worker node in CircleCI"""

import os
import yaml

this_folder = os.path.abspath(os.path.dirname(__file__))
config_file = os.path.join(this_folder, "..", "localstack-tests.incl.yml")


def main():
    worker_id = os.environ.get("CIRCLE_NODE_INDEX")
    with open(config_file) as fp:
        config = yaml.safe_load(fp.read())
        test_workers = config.get("tests", {})
        tests = test_workers.get(f"worker-{worker_id}") or []
        print("\n".join(tests))


if __name__ == "__main__":
    main()
